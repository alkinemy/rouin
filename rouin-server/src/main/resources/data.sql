DROP TABLE IF EXISTS users;


CREATE TABLE users(
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id VARCHAR(256) NOT NULL UNIQUE,
    email VARCHAR(256) NOT NULL UNIQUE,
    created_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    modified_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE access_tokens(
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id VARCHAR(256) NOT NULL,
    access_token VARCHAR(256) NOT NULL UNIQUE,
    item_id VARCHAR(256) NOT NULL UNIQUE,
    created_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    modified_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE accounts(
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    account_id VARCHAR(256) NOT NULL UNIQUE,
    reference_id VARCHAR(256) NOT NULL UNIQUE,
    user_id VARCHAR(256) NOT NULL,
    name VARCHAR(256) NOT NULL,
    alias_name VARCHAR(256) NOT NULL,
    official_name VARCHAR(256) NULL,
    account_type VARCHAR(256) NOT NULL,
    account_sub_type VARCHAR(256) NULL,
    deleted TINYINT(1) NOT NULL DEFAULT FALSE,
    created_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    modified_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);


CREATE TABLE transactions(
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    transaction_id VARCHAR(256) NOT NULL UNIQUE,
    reference_id VARCHAR(256) NOT NULL UNIQUE,
    user_id VARCHAR(256) NOT NULL,
    account_id VARCHAR(256) NOT NULL,
    amount DOUBLE DEFAULT 0 NOT NULL,
    currency VARCHAR(3) NOT NULL,
    description VARCHAR(256) NOT NULL,
    deleted TINYINT(1) DEFAULT FALSE NOT NULL,
    created_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    modified_date DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);

